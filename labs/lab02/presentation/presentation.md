---
## Front matter
lang: ru-RU
title: Лабораторная работа №2
subtitle: Сетевые технологии 
author:
  - Мишина А. А.
date: 13 сентября 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'

 - '\makeatother'
---

## Цели и задачи

- Приобретение практических навыков по установке и конфигурированию DNS- сервера, усвоение принципов работы системы доменных имён.

# Выполнение лабораторной работы

# Установка DNS-сервера

## Bind и bind-utils

![Переход в режим суперпользователя и установка bind, bind-utils](image/1.png){ #fig:001 width=60% }

## Запрос к DNS-адресу

![Запрос с помощью утилиты dig](image/2.png){ #fig:002 width=60% }

# Конфигурирование кэширующего DNS-сервера

## Содержание файлов

![Просмотр содержания файла /etc/resolv.conf](image/3.png){ #fig:003 width=80% }

## Содержание файлов

![Просмотр содержания файла /etc/named.conf](image/4.png){ #fig:004 width=80% }

## Содержание файлов

![Просмотр содержания файла /var/named/named.ca](image/5.png){ #fig:005 width=80% }

## Содержание файлов

![Просмотр содержания файла /var/named/named.localhost](image/6.png){ #fig:006 width=80% }

## Содержание файлов

![Просмотр содержания файла /var/named/named.loopback](image/7.png){ #fig:007 width=80% }

## DNS-сервер

![Запуск DNS-сервера, включение запуска DNS-сервера в автозапуск при загрузке системы, анализ выведенной на экран информации при выполнении команды dig www.yandex.ru и dig 127.0.0.1 www.yandex.ru](image/8.png){ #fig:008 width=30% }

## DNS-сервер

![Настройка DNS-сервера сервером по умолчанию для хоста server и внутренней виртуальной сети. Повторяем действия для соединения System eth0](image/9.png){ #fig:009 width=60% }


## NetworkManager

![Перезапуск NetworkManager и проверка наличия изменений в файле /etc/resolv.conf](image/10.png){ #fig:010 width=80% }

## DNS-запросы

![Настройка направление DNS-запросов от всех узлов внутренней сети, включая запросы от узла server, через узел server](image/11.png){ #fig:011 width=70% }

## Внос изменений

![Внос изменений в настройки межсетевого экрана узла server, разрешив работу с DNS. Проверка, что DNS-запросы идут через узел server, который прослушивает порт 53](image/12.png){ #fig:012 width=40% }

## Перенаправление DNS-запросов

![Добавление перенаправлений DNS-запросов на конкретный вышестоящий DNS-сервер и дополнительных настроек](image/13.png){ #fig:013 width=30% }

# Конфигурирование первичного DNS-сервера

## Шаблон

![Копирование шаблона описания DNS-зон из каталога /etc в каталог /etc/named и изменение его названия](image/14.png){ #fig:014 width=80% }

## Файл описания зоны

![Включение файла описания зоны /etc/named/aamishina.net в конфигурационном файле DNS /etc/named.conf](image/15.png){ #fig:015 width=80% }

## Файл /etc/named/aamishina.net

![Открытие файла /etc/named/user.net на редактирование. Прописывание своей прямой зоны, обратной зоны и удаление остальных записей в файле](image/16.png){ #fig:016 width=30% }

## Файлы прямой и обратной зоны

![В каталоге /var/named создание подкаталогов master/fz и master/rz. Копирование шаблона прямой DNS-зоны named.localhost из каталога /var/named в каталог /var/named/master/fz и изменение его названия](image/17.png){ #fig:017 width=80% }

## Прямая зона

![Изменение файла /var/named/master/fz/aamishina.net, указав необходимые DNS записи для прямой зоны](image/18.png){ #fig:018 width=80% }

## Обратная зона

![Копирование шаблона обратной DNS-зоны named.loopback из каталога /var/named в каталог /var/named/master/rz и изменение его названия](image/19.png){ #fig:019 width=80% }

## Обратная зона

![Изменение файла /var/named/master/rz/192.168.1, указав необходимые DNS записи для обратной зоны](image/20.png){ #fig:020 width=80% }

## Права доступа

![Исправление прав доступа к файлам в каталогах /etc/named и /var/named, корректное восстановление их меток в SELinux, проверка состояния переключателей SELinux](image/21.png){ #fig:021 width=80% }

## Лог системных сообщений

![Запуск расширенного лога системных сообщений](image/22.png){ #fig:022 width=80% }

## DNS-сервер

![Перезапуск DNS-сервера](image/24.png){ #fig:024 width=80% }

## Лог системных сообщений

![Проверка корректности работы системы](image/23.png){ #fig:023 width=50% }

# Анализ работы DNS-сервера 

## Описание DNS-зоны

![Получение описания DNS-зоны с сервера ns.aamishina.net.](image/25.png){ #fig:025 width=60% }

## DNS-сервер

![Анализ корректности работы DNS-сервера](image/26.png){ #fig:026 width=80% }

# Внесение изменений в настройки внутреннего окружения виртуальной машины

## Файл dns.sh

![Переход в каталог для внесения изменений в настройки внутреннего окружения /vagrant/provision/server/, создание в нём каталога dns, в который помещаем конфигурационные файлы DNS. Создание в каталоге /vagrant/provision/server исполняемого файла dns.sh](image/27.png){ #fig:027 width=80% }

## Файл dns.sh

![Открытие файла на редактирование и прописывание в нём скрипта](image/28.png){ #fig:028 width=30% }

## Vagrantfile

![Добавление параметров в конфигурационном файле Vagrantfile в разделе конфигурации для сервера](image/29.png){ #fig:029 width=30% }

## Вывод

- В ходе выполнения данной лабораторной работы я приобрела практические навыки по установке и конфигурированию DNS-сервера, усвоила принципы работы системы доменных имён.